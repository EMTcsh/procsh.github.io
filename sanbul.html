<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>산불 비상근무 상황표</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <style>
    body {font-family:'Roboto',sans-serif;background:#f8f9fc;margin:0;padding:0;display:flex;flex-direction:column;height:100vh;color:#333;}
    h2{text-align:center;color:#4a90e2;margin-top:20px;}
    .container{flex:1;display:flex;flex-direction:column;padding:20px;overflow-y:auto;justify-content:space-between;}
    table{width:100%;border-collapse:collapse;margin-top:20px;background:#fff;border-radius:8px;box-shadow:0 4px 8px rgba(0,0,0,0.1);}
    th,td{padding:14px 20px;text-align:center;border-bottom:1px solid #e0e0e0;}
    th{background:#f4f7fa;font-weight:500;}
    td{background:#fff;}
    td button{background:#e74c3c;color:#fff;border:none;padding:8px 10px;border-radius:5px;cursor:pointer;transition:0.3s;}
    td button:hover{background:#c0392b;}
    form{background:#fff;padding:20px;border-radius:8px;box-shadow:0 4px 8px rgba(0,0,0,0.1);margin-top:auto;display:grid;gap:15px;}
    .form-row{display:flex;gap:15px;flex-wrap:wrap;}
    .form-row input{padding:12px;font-size:16px;border:1px solid #ccc;border-radius:5px;width:100%;box-sizing:border-box;}
    form button{background:#4a90e2;color:#fff;border:none;padding:12px;font-size:16px;border-radius:5px;cursor:pointer;transition:0.3s;}
    form button:hover{background:#357ab7;}
    .button-group{display:flex;gap:20px;justify-content:space-between;}
    .button-group button{flex:1;}
    @media(max-width:768px){.form-row{flex-direction:column;}.button-group{flex-direction:column;}}
  </style>
</head>
<body>
<div class="container">
  <h2>산불 비상근무 상황표</h2>
  <table>
    <thead>
      <tr>
        <th>날짜</th><th>근무시간</th><th>근무자</th><th>배치장소</th>
        <th>산불위기경보단계</th><th>산불지수예측</th><th>개인임무</th><th>삭제</th>
      </tr>
    </thead>
    <tbody id="workerTable"></tbody>
  </table>

  <form id="workerForm">
    <div class="form-row">
      <h2>산불 비상근무 입력</h2>
      <div><label>날짜:</label><input type="date" id="date" required></div>
      <div><label>시작 시간:</label><input type="time" id="startTime" required></div>
      <div><label>종료 시간:</label><input type="time" id="endTime" required></div>
      <div><label>근무자:</label><input type="text" id="name" required></div>
      <div><label>배치장소:</label><input type="text" id="remarks" required></div>
      <div><label>산불위기경보단계:</label><input id="warningLevel" required></div>
      <div><label>산불배치(순찰) 구역:</label><input id="fireIndex" required></div>
      <div><label>개인임무:</label><input id="notice" required></div>
      <div class="button-group">
        <button type="button" onclick="addWorker()">추가</button>
      </div>
    </div>
  </form>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycby1goX7uk_nAkKALFHShv4WE-FpqortF_auklXY5lOuh0Fal3US41H2zVrRDDX0B7z1/exec";

function addWorker() {
  const date=document.getElementById("date").value;
  const start=document.getElementById("startTime").value;
  const end=document.getElementById("endTime").value;
  const name=document.getElementById("name").value;
  const remarks=document.getElementById("remarks").value;
  const warning=document.getElementById("warningLevel").value;
  const fireIndex=document.getElementById("fireIndex").value;
  const notice=document.getElementById("notice").value;

  if(!date||!start||!end||!name||!remarks||!warning||!fireIndex||!notice){
    alert("모든 항목을 입력해주세요");return;
  }
  const workTime=`${start} - ${end}`;
  const worker={date,workTime,name,remarks,warningLevel:warning,fireIndex,notice};

  fetch(SCRIPT_URL,{
    method:"POST",
    body:JSON.stringify(worker),
    headers:{"Content-Type":"application/json"}
  })
  .then(res=>res.text())
  .then(msg=>{
    alert("구글 스프레드시트에 저장되었습니다 ✅");
    addRow(worker);
    document.getElementById("workerForm").reset();
  })
  .catch(err=>{
    console.error(err);
    alert("저장 실패 ❌");
  });
}

function addRow(worker){
  const row=document.createElement("tr");
  row.innerHTML=`
    <td>${worker.date}</td>
    <td>${worker.workTime}</td>
    <td>${worker.name}</td>
    <td>${worker.remarks}</td>
    <td>${worker.warningLevel}</td>
    <td>${worker.fireIndex}</td>
    <td>${worker.notice}</td>
    <td><button onclick="this.closest('tr').remove()">삭제</button></td>`;
  document.getElementById("workerTable").appendChild(row);
}
</script>
</body>
</html>
